<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HSK Flashcards</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #7f1d1d 0%, #991b1b 50%, #c2410c 100%);
      min-height: 100vh;
      color: white;
      padding: 1rem;
    }
    
    .container {
      max-width: 42rem;
      margin: 0 auto;
      padding: 2rem 0;
    }
    
    .header {
      text-align: center;
      margin-bottom: 2rem;
    }
    
    .title {
      font-size: 3rem;
      font-weight: bold;
      margin-bottom: 0.5rem;
    }
    
    .subtitle {
      color: #fecaca;
      font-size: 1.125rem;
    }
    
    .controls {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 1rem;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
    }
    
    .grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1rem;
      margin-bottom: 1rem;
    }
    
    label {
      display: block;
      font-size: 0.875rem;
      margin-bottom: 0.5rem;
      color: #fecaca;
    }
    
    select {
      width: 100%;
      padding: 0.5rem 1rem;
      border-radius: 0.5rem;
      background: rgba(127, 29, 29, 0.5);
      border: 1px solid #991b1b;
      color: white;
      font-size: 1rem;
      cursor: pointer;
    }
    
    select option {
      background: #7f1d1d;
      color: white;
    }
    
    .button-row {
      display: flex;
      gap: 0.5rem;
    }
    
    .button {
      flex: 1;
      padding: 0.5rem 1rem;
      background: rgba(255, 255, 255, 0.2);
      border: none;
      border-radius: 0.5rem;
      color: white;
      font-size: 1rem;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }
    
    .button:hover {
      background: rgba(255, 255, 255, 0.3);
    }
    
    .progress-container {
      margin-bottom: 1rem;
    }
    
    .progress-text {
      display: flex;
      justify-content: space-between;
      font-size: 0.875rem;
      margin-bottom: 0.5rem;
      color: #fecaca;
    }
    
    .progress-bar {
      width: 100%;
      height: 0.5rem;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 9999px;
      overflow: hidden;
    }
    
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #fbbf24 0%, #f97316 100%);
      transition: width 0.3s;
    }
    
    .card-container {
      position: relative;
      margin-bottom: 1.5rem;
    }
    
    .star-button {
      position: absolute;
      top: -1rem;
      right: -1rem;
      z-index: 10;
      padding: 0.75rem;
      border-radius: 9999px;
      border: none;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .star-button.starred {
      background: #eab308;
      color: white;
    }
    
    .star-button.unstarred {
      background: rgba(255, 255, 255, 0.2);
      color: rgba(255, 255, 255, 0.6);
    }
    
    .star-button:hover {
      background: rgba(255, 255, 255, 0.3);
    }
    
    .card-wrapper {
      width: 100%;
      height: 24rem;
      cursor: pointer;
      perspective: 1000px;
    }
    
    .card-inner {
      position: relative;
      width: 100%;
      height: 100%;
      transition: transform 0.5s;
      transform-style: preserve-3d;
    }
    
    .card-inner.flipped {
      transform: rotateY(180deg);
    }
    
    .card-face {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.2) 0%, rgba(255, 255, 255, 0.1) 100%);
      backdrop-filter: blur(10px);
      border-radius: 1.5rem;
      border: 2px solid rgba(255, 255, 255, 0.3);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 2rem;
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
    }
    
    .card-back {
      transform: rotateY(180deg);
    }
    
    .pinyin {
      font-size: 3.75rem;
      font-weight: bold;
      margin-bottom: 1rem;
      color: #fde047;
    }
    
    .hanzi-large {
      font-size: 4.5rem;
      font-weight: bold;
      color: #fde047;
    }
    
    .hanzi {
      font-size: 5rem;
      font-weight: bold;
      margin-bottom: 0.5rem;
    }
    
    .hanzi-pinyin {
      font-size: 1.875rem;
      color: #fde047;
      margin-bottom: 0.5rem;
    }
    
    .english {
      font-size: 1.5rem;
      color: #fecaca;
    }
    
    .flip-hint {
      color: #fecaca;
      font-size: 0.875rem;
      margin-top: 1rem;
    }
    
    .empty-state {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 1.5rem;
      padding: 2rem;
      text-align: center;
      margin-bottom: 1.5rem;
    }
    
    .nav-container {
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    
    .nav-button {
      padding: 0.75rem 1.5rem;
      background: rgba(255, 255, 255, 0.2);
      border: none;
      border-radius: 0.75rem;
      color: white;
      font-size: 1.125rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .nav-button:hover:not(:disabled) {
      background: rgba(255, 255, 255, 0.3);
    }
    
    .nav-button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    .nav-counter {
      flex: 1;
      text-align: center;
      font-size: 1.125rem;
      font-weight: 600;
    }
    
    .star-icon {
      width: 1.25rem;
      height: 1.25rem;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;

    const levels = {
      "HSK 1": [
  { "pinyin": "wÇ’",       "hanzi": "æˆ‘",       "english": "I, me" },
  { "pinyin": "wÇ’men",    "hanzi": "æˆ‘ä»¬",     "english": "we, us" },
  { "pinyin": "nÇ",       "hanzi": "ä½ ",       "english": "you" },
  { "pinyin": "nÇmen",    "hanzi": "ä½ ä»¬",     "english": "you (plural)" },
  { "pinyin": "tÄ",       "hanzi": "ä»–",       "english": "he, him" },
  { "pinyin": "tÄ",       "hanzi": "å¥¹",       "english": "she, her" },
  { "pinyin": "tÄmen",    "hanzi": "ä»–ä»¬",     "english": "they (male/mixed)" },
  { "pinyin": "tÄmen",    "hanzi": "å¥¹ä»¬",     "english": "they (female)" },
  { "pinyin": "zhÃ¨",      "hanzi": "è¿™",       "english": "this" },
  { "pinyin": "zhÃ¨r",     "hanzi": "è¿™å„¿",     "english": "here" },
  { "pinyin": "nÃ ",       "hanzi": "é‚£",       "english": "that" },
  { "pinyin": "nÃ r",      "hanzi": "é‚£å„¿",     "english": "there" },
  { "pinyin": "nÇ",       "hanzi": "å“ª",       "english": "which" },
  { "pinyin": "nÇr",      "hanzi": "å“ªå„¿",     "english": "where" },
  { "pinyin": "shÃ©i",     "hanzi": "è°",       "english": "who" },
  { "pinyin": "shÃ©nme",   "hanzi": "ä»€ä¹ˆ",     "english": "what, why" },
  { "pinyin": "duÅshÇo",  "hanzi": "å¤šå°‘",     "english": "how many, how much" },
  { "pinyin": "jÇ",       "hanzi": "å‡ ",       "english": "a few, how many" },
  { "pinyin": "zÄ›nme",    "hanzi": "æ€ä¹ˆ",     "english": "how" },
  { "pinyin": "zÄ›nmeyÃ ng","hanzi": "æ€ä¹ˆæ ·",   "english": "how about" },
  { "pinyin": "yÄ«",       "hanzi": "ä¸€",       "english": "one" },
  { "pinyin": "Ã¨r",       "hanzi": "äºŒ",       "english": "two" },
  { "pinyin": "sÄn",      "hanzi": "ä¸‰",       "english": "three" },
  { "pinyin": "sÃ¬",       "hanzi": "å››",       "english": "four" },
  { "pinyin": "wÇ”",       "hanzi": "äº”",       "english": "five" },
  { "pinyin": "liÃ¹",      "hanzi": "å…­",       "english": "six" },
  { "pinyin": "qÄ«",       "hanzi": "ä¸ƒ",       "english": "seven" },
  { "pinyin": "bÄ",       "hanzi": "å…«",       "english": "eight" },
  { "pinyin": "jiÇ”",      "hanzi": "ä¹",       "english": "nine" },
  { "pinyin": "shÃ­",      "hanzi": "å",       "english": "ten" },
  { "pinyin": "lÃ­ng",     "hanzi": "é›¶",       "english": "zero" },
  { "pinyin": "gÃ¨",       "hanzi": "ä¸ª",       "english": "generic measure word" },
  { "pinyin": "suÃ¬",      "hanzi": "å²",       "english": "year (of age)" },
  { "pinyin": "bÄ›n",      "hanzi": "æœ¬",       "english": "volume; measure word for books" },
  { "pinyin": "xiÄ“",      "hanzi": "äº›",       "english": "some" },
  { "pinyin": "kuÃ i",     "hanzi": "å—",       "english": "piece; basic unit of money" },
  { "pinyin": "bÃ¹",       "hanzi": "ä¸",       "english": "no; not" },
  { "pinyin": "mÃ©i",      "hanzi": "æ²¡",       "english": "no; not (have)" },
  { "pinyin": "hÄ›n",      "hanzi": "å¾ˆ",       "english": "quite; very" },
  { "pinyin": "tÃ i",      "hanzi": "å¤ª",       "english": "too" },
  { "pinyin": "hÇo",      "hanzi": "å¥½",       "english": "good" },
  { "pinyin": "dÃ ",       "hanzi": "å¤§",       "english": "big" },
  { "pinyin": "xiÇo",     "hanzi": "å°",       "english": "small" },
  { "pinyin": "duÅ",      "hanzi": "å¤š",       "english": "many" },
  { "pinyin": "shÇo",     "hanzi": "å°‘",       "english": "few" },
  { "pinyin": "rÃ¨",       "hanzi": "çƒ­",       "english": "hot" },
  { "pinyin": "lÄ›ng",     "hanzi": "å†·",       "english": "cold" },
  { "pinyin": "piÃ oliang", "hanzi": "æ¼‚äº®",  "english": "pretty" },
  { "pinyin": "gÄoxÃ¬ng", "hanzi": "é«˜å…´",    "english": "happy" },
  { "pinyin": "dÅu",      "hanzi": "éƒ½",       "english": "both; all" },
  { "pinyin": "Ã i",       "hanzi": "çˆ±",       "english": "love" },
  { "pinyin": "xÇhuan",   "hanzi": "å–œæ¬¢",    "english": "to like" },
  { "pinyin": "huÃ¬",      "hanzi": "ä¼š",       "english": "can; to know how to" },
  { "pinyin": "nÃ©ng",     "hanzi": "èƒ½",       "english": "can; be able to" },
  { "pinyin": "xiÇng",    "hanzi": "æƒ³",       "english": "to think; to want" },
  { "pinyin": "shÃ¬",      "hanzi": "æ˜¯",       "english": "to be" },
  { "pinyin": "yÇ’u",      "hanzi": "æœ‰",       "english": "to have" },
  { "pinyin": "zÃ i",      "hanzi": "åœ¨",       "english": "to be at; in; on" },
  { "pinyin": "zuÃ²",      "hanzi": "åš",       "english": "to do; to make" },
  { "pinyin": "chÄ«",      "hanzi": "åƒ",       "english": "to eat" },
  { "pinyin": "hÄ“",       "hanzi": "å–",       "english": "to drink" },
  { "pinyin": "shuÅhuÃ ",  "hanzi": "è¯´è¯",     "english": "to speak" },
  { "pinyin": "kÃ n",      "hanzi": "çœ‹",       "english": "to look; to watch" },
  { "pinyin": "kÃ njiÃ n",  "hanzi": "çœ‹è§",     "english": "to see" },
  { "pinyin": "tÄ«ng",     "hanzi": "å¬",       "english": "to listen" },
  { "pinyin": "jiÃ o",     "hanzi": "å«",       "english": "to call; to be called" },
  { "pinyin": "mÇi",      "hanzi": "ä¹°",       "english": "to buy" },
  { "pinyin": "kÄi",      "hanzi": "å¼€",       "english": "to open; to drive" },
  { "pinyin": "zuÃ²",      "hanzi": "å",       "english": "to sit" },
  { "pinyin": "dÃº",       "hanzi": "è¯»",       "english": "to read" },
  { "pinyin": "xiÄ›",      "hanzi": "å†™",       "english": "to write" },
  { "pinyin": "dÇâ€¯diÃ nhuÃ ", "hanzi": "æ‰“ç”µè¯", "english": "to make a phone call" },
  { "pinyin": "rÃ¨nshi",   "hanzi": "è®¤è¯†",     "english": "to recognize; to know" },
  { "pinyin": "xuÃ©xÃ­",    "hanzi": "å­¦ä¹ ",     "english": "to study; to learn" },
  { "pinyin": "gÅngzuÃ²",  "hanzi": "å·¥ä½œ",     "english": "to work" },
  { "pinyin": "shuÃ¬jiÃ o", "hanzi": "ç¡è§‰",     "english": "to sleep" },
  { "pinyin": "xiÃ â€¯yÇ”",   "hanzi": "ä¸‹é›¨",     "english": "to rain" },
  { "pinyin": "rÃ¬",       "hanzi": "æ—¥",       "english": "day; sun" },
  { "pinyin": "yuÃ¨",      "hanzi": "æœˆ",       "english": "month; moon" },
  { "pinyin": "niÃ¡n",     "hanzi": "å¹´",       "english": "year" },
  { "pinyin": "shÃ­hou",   "hanzi": "æ—¶å€™",    "english": "time; moment" },
  { "pinyin": "xiÃ nzÃ i",  "hanzi": "ç°åœ¨",    "english": "now" },
  { "pinyin": "jÄ«ntiÄn",  "hanzi": "ä»Šå¤©",    "english": "today" },
  { "pinyin": "mÃ­ngtiÄn", "hanzi": "æ˜å¤©",    "english": "tomorrow" },
  { "pinyin": "zuÃ³tiÄn",  "hanzi": "æ˜¨å¤©",    "english": "yesterday" },
  { "pinyin": "shÃ ngwÇ”",  "hanzi": "ä¸Šåˆ",    "english": "morning" },
  { "pinyin": "zhÅngwÇ”",  "hanzi": "ä¸­åˆ",    "english": "noon" },
  { "pinyin": "xiÃ wÇ”",   "hanzi": "ä¸‹åˆ",    "english": "afternoon" },
  { "pinyin": "diÇn",     "hanzi": "ç‚¹",       "english": "oâ€™clock; dot" },
  { "pinyin": "fÄ“nzhÅng", "hanzi": "åˆ†é’Ÿ",    "english": "minute" },
  { "pinyin": "yÄ«fu",     "hanzi": "è¡£æœ",     "english": "clothes" },
  { "pinyin": "shÅ«",      "hanzi": "ä¹¦",       "english": "book" },
  { "pinyin": "zhuÅzi",   "hanzi": "æ¡Œå­",     "english": "table; desk" },
  { "pinyin": "yÇzi",     "hanzi": "æ¤…å­",     "english": "chair" },
  { "pinyin": "pÃ­ngguÇ’", "hanzi": "è‹¹æœ",     "english": "apple" },
  { "pinyin": "shÇ”iguÇ’", "hanzi": "æ°´æœ",     "english": "fruit" },
  { "pinyin": "bÄ“izi",    "hanzi": "æ¯å­",     "english": "cup; glass" },
  { "pinyin": "diÃ nshÃ¬",  "hanzi": "ç”µè§†",     "english": "TV" },
  { "pinyin": "diÃ nnÇo",  "hanzi": "ç”µè„‘",     "english": "computer" },
  { "pinyin": "diÃ nyÇng", "hanzi": "ç”µå½±",     "english": "movie" },
  { "pinyin": "fÄ“ijÄ«",    "hanzi": "é£æœº",     "english": "plane" },
  { "pinyin": "chÅ«zÅ«chÄ“", "hanzi": "å‡ºç§Ÿè½¦",   "english": "taxi" },
  { "pinyin": "mÄo",      "hanzi": "çŒ«",       "english": "cat" },
  { "pinyin": "gÇ’u",      "hanzi": "ç‹—",       "english": "dog" },
  { "pinyin": "tiÄnqÃ¬",   "hanzi": "å¤©æ°”",     "english": "weather" },
  { "pinyin": "zÃ¬",       "hanzi": "å­—",       "english": "character; letter" },
  { "pinyin": "HÃ nyÇ”",   "hanzi": "æ±‰è¯­",     "english": "Chinese (language)" },
  { "pinyin": "rÃ©n",      "hanzi": "äºº",       "english": "person; people" },
  { "pinyin": "mÃ­ngzÃ¬",   "hanzi": "åå­—",     "english": "name" },
  { "pinyin": "mÄma",     "hanzi": "å¦ˆå¦ˆ",     "english": "mom" },
  { "pinyin": "bÃ ba",     "hanzi": "çˆ¸çˆ¸",     "english": "dad" },
  { "pinyin": "Ã©rzi",     "hanzi": "å„¿å­",     "english": "son" },
  { "pinyin": "nÇšâ€™Ã©r",   "hanzi": "å¥³å„¿",     "english": "daughter" },
  { "pinyin": "pÃ©ngyÇ’u", "hanzi": "æœ‹å‹",     "english": "friend" },
  { "pinyin": "xiÄnsheng", "hanzi": "å…ˆç”Ÿ",    "english": "Mr; sir" },
  { "pinyin": "xiÇojiÄ›", "hanzi": "å°å§",     "english": "Miss" },
  { "pinyin": "lÇoshÄ«",  "hanzi": "è€å¸ˆ",     "english": "teacher" },
  { "pinyin": "xuÃ©sheng", "hanzi": "å­¦ç”Ÿ",     "english": "student" },
  { "pinyin": "tÃ³ngxuÃ©", "hanzi": "åŒå­¦",     "english": "classmate; schoolmate" },
  { "pinyin": "yÄ«shÄ“ng", "hanzi": "åŒ»ç”Ÿ",     "english": "doctor" },
  { "pinyin": "dÅngxi",  "hanzi": "ä¸œè¥¿",     "english": "thing(s)" },
  { "pinyin": "qiÃ¡n",    "hanzi": "é’±",       "english": "money" },
  { "pinyin": "shuÇ",    "hanzi": "æ°´",       "english": "water" },
  { "pinyin": "chÃ¡",     "hanzi": "èŒ¶",       "english": "tea" },
  { "pinyin": "cÃ i",     "hanzi": "èœ",       "english": "dish; vegetable" },
  { "pinyin": "mÇfÃ n",   "hanzi": "ç±³é¥­",     "english": "(cooked) rice" },
  { "pinyin": "yÄ«yuÃ n",  "hanzi": "åŒ»é™¢",     "english": "hospital" },
  { "pinyin": "jiÄ",     "hanzi": "å®¶",       "english": "home; family" },
  { "pinyin": "xuÃ©xiÃ o", "hanzi": "å­¦æ ¡",     "english": "school" },
  { "pinyin": "fÃ nguÇn", "hanzi": "é¥­é¦†",     "english": "restaurant" },
  { "pinyin": "shÄngdiÃ n","hanzi": "å•†åº—",    "english": "shop" },
  { "pinyin": "huÇ’chÄ“zhÃ n","hanzi": "ç«è½¦ç«™","english": "train station" },
  { "pinyin": "shÃ ng",    "hanzi": "ä¸Š",       "english": "on; above; up; last" },
  { "pinyin": "xiÃ ",     "hanzi": "ä¸‹",       "english": "under; below; down; next" },
  { "pinyin": "qiÃ¡nmiÃ n","hanzi": "å‰é¢",    "english": "in front; ahead" },
  { "pinyin": "hÃ²umiÃ n", "hanzi": "åé¢",    "english": "behind; back" },
  { "pinyin": "lÇ",      "hanzi": "é‡Œ",       "english": "inside; within" },
  { "pinyin": "hÃ©",       "hanzi": "å’Œ",       "english": "and" },
  { "pinyin": "de",       "hanzi": "çš„",       "english": "possession particle" },
  { "pinyin": "le",       "hanzi": "äº†",       "english": "aspect particle; completed action" },
  { "pinyin": "ma",       "hanzi": "å—",       "english": "question particle (yes/no)" },
  { "pinyin": "ne",       "hanzi": "å‘¢",       "english": "question particle (whâ€‘word)" },
  { "pinyin": "wÃ¨i",      "hanzi": "å–‚",       "english": "hello (on phone); hey" },
  { "pinyin": "xiÃ¨xie",   "hanzi": "è°¢è°¢",     "english": "thanks" },
  { "pinyin": "bÃºâ€¯kÃ¨qi", "hanzi": "ä¸å®¢æ°”",   "english": "youâ€™re welcome" },
  { "pinyin": "zÃ ijiÃ n", "hanzi": "å†è§",     "english": "goodbye" },
  { "pinyin": "qÇng",     "hanzi": "è¯·",       "english": "please" },
  { "pinyin": "duÃ¬buqÇ","hanzi": "å¯¹ä¸èµ·",   "english": "sorry" },
  { "pinyin": "mÃ©iâ€¯guÄnxi","hanzi": "æ²¡å…³ç³»", "english": "itâ€™s all right" },
  { "pinyin": "fÃ ndiÃ n", "hanzi": "é¥­åº—", "english": "hotel; restaurant" },
  { "pinyin": "xÄ«ngqÄ«", "hanzi": "æ˜ŸæœŸ", "english": "week" },
  { "pinyin": "hÃ o", "hanzi": "å·", "english": "date (of the month); number" },
  { "pinyin": "shuÅ", "hanzi": "è¯´", "english": "to speak; to say" },
  { "pinyin": "lÃ¡i", "hanzi": "æ¥", "english": "to come" },
  { "pinyin": "qÃ¹", "hanzi": "å»", "english": "to go" },
  { "pinyin": "BÄ›ijÄ«ng", "hanzi": "åŒ—äº¬", "english": "Beijing" },
  { "pinyin": "zhÃ¹", "hanzi": "ä½", "english": "to live; to stay" },
  { "pinyin": "yÄ«diÇnr", "hanzi": "ä¸€ç‚¹å„¿", "english": "a little; a bit" }
],
      "HSK 2": [
  { "pinyin": "guÄ«", "hanzi": "é¾Ÿ", "english": "turtle" },
  { "pinyin": "liÇng", "hanzi": "ä¸¤", "english": "two (used with measure words)" },
  { "pinyin": "qiÄn", "hanzi": "åƒ", "english": "1000" }, 
  { "pinyin": "huÃ¬",      "hanzi": "ä¼š",       "english": "will" },
  { "pinyin": "lÃ­ng",     "hanzi": "é›¶",       "english": "zero" },
  { "pinyin": "chÃ¡ng",    "hanzi": "é•¿",       "english": "long" },
  { "pinyin": "hÇochÄ«",   "hanzi": "å¥½åƒ",     "english": "delicious" },
  { "pinyin": "kÄfÄ“i",    "hanzi": "å’–å•¡",     "english": "coffee" },
  { "pinyin": "mÃ i",      "hanzi": "å–",       "english": "to sell" },
  { "pinyin": "shuÅhuÃ ",  "hanzi": "è¯´è¯",     "english": "to say" },
  { "pinyin": "rÃ¬",       "hanzi": "æ—¥",       "english": "day" },
  { "pinyin": "qÃ¹niÃ¡n",   "hanzi": "å»å¹´",     "english": "last year" },
  { "pinyin": "piÃ o",     "hanzi": "ç¥¨",       "english": "ticket" },
  { "pinyin": "shÄ“ngrÃ¬",  "hanzi": "ç”Ÿæ—¥",     "english": "birthday" },
  { "pinyin": "nÇšrÃ©n",    "hanzi": "å¥³äºº",     "english": "woman" },
  { "pinyin": "ba",       "hanzi": "å§",       "english": "sentence particle" },
  { "pinyin": "chÅ«",      "hanzi": "å‡º",       "english": "to go out" },
  { "pinyin": "mÃ©n",      "hanzi": "é—¨",       "english": "gate" },
  { "pinyin": "yÃ o",      "hanzi": "è¦",       "english": "to want" },
  { "pinyin": "zÃ i",      "hanzi": "åœ¨",       "english": "to be there" },
  { "pinyin": "zhÄ«",      "hanzi": "åª",       "english": "count animal" },
  { "pinyin": "jiÄ›jie",   "hanzi": "å§å§",     "english": "elder sister" },
  { "pinyin": "gÄo",      "hanzi": "é«˜",       "english": "tall" },
  { "pinyin": "yÄ›",       "hanzi": "ä¹Ÿ",       "english": "also" },
  { "pinyin": "bÇi",      "hanzi": "ç™¾",       "english": "100" },
  { "pinyin": "bÃ¡i",      "hanzi": "ç™½",       "english": "bright" },
  { "pinyin": "dÃ jiÄ",    "hanzi": "å¤§å®¶",     "english": "everyone" },
  { "pinyin": "duÃ¬",      "hanzi": "å¯¹",       "english": "correct" }, 
  { "pinyin": "fÃºwÃ¹yuÃ¡n", "hanzi": "æœåŠ¡å‘˜", "english": "waiter/waitress; server" },
  { "pinyin": "jÄ«dÃ n", "hanzi": "é¸¡è›‹", "english": "egg" },
  { "pinyin": "xÄ«guÄ", "hanzi": "è¥¿ç“œ", "english": "watermelon" },
  { "pinyin": "yÃ¡ngrÃ²u", "hanzi": "ç¾Šè‚‰", "english": "mutton; lamb" },
  { "pinyin": "yÃº", "hanzi": "é±¼", "english": "fish" },
  { "pinyin": "tÄ«zÃºqiÃº", "hanzi": "è¸¢è¶³çƒ", "english": "to play soccer" },
  { "pinyin": "dÇlÃ¡nqiÃº", "hanzi": "æ‰“ç¯®çƒ", "english": "to play basketball" },
  { "pinyin": "yÄ«qÇ", "hanzi": "ä¸€èµ·", "english": "together" },
  { "pinyin": "juÃ©de", "hanzi": "è§‰å¾—", "english": "to feel; to think" },
  { "pinyin": "pÇobÃ¹", "hanzi": "è·‘æ­¥", "english": "to run; running" },
  { "pinyin": "yÃ³uyÇ’ng", "hanzi": "æ¸¸æ³³", "english": "to swim" },
  { "pinyin": "yÃ¹ndÃ²ng", "hanzi": "è¿åŠ¨", "english": "sport; exercise" },
  { "pinyin": "zÇ’u", "hanzi": "èµ°", "english": "to walk; to go" },
  { "pinyin": "zhÄ«dÃ o", "hanzi": "çŸ¥é“", "english": "to know" },
  { "pinyin": "gÄ“ge", "hanzi": "å“¥å“¥", "english": "elder brother" },
  { "pinyin": "cÃ­", "hanzi": "è¯", "english": "word; term" },
  { "pinyin": "gÅnggÃ²ngqÃ¬chÄ“", "hanzi": "å…¬å…±æ±½è½¦", "english": "bus; public transport" },
  { "pinyin": "yÃ²ubiÄn", "hanzi": "å³è¾¹", "english": "right side" },
  { "pinyin": "zuÇ’biÄn", "hanzi": "å·¦è¾¹", "english": "left side" },
  { "pinyin": "bÄ«nguÇn", "hanzi": "å®¾é¦†", "english": "hotel" },
  { "pinyin": "guÃ²", "hanzi": "è¿‡", "english": "to pass; to celebrate (a holiday/birthday)" }
      ],
      "HSK 3": [
        { "pinyin": "not available yet", "hanzi": "", "english": "" }
      ]
    };

    function StarIcon({ filled }) {
      return (
        <svg className="star-icon" viewBox="0 0 24 24" fill={filled ? "currentColor" : "none"} stroke="currentColor" strokeWidth="2">
          <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
        </svg>
      );
    }

    function App() {
      const [selectedLevel, setSelectedLevel] = useState("HSK 1");
      const [index, setIndex] = useState(0);
      const [flip, setFlip] = useState(false);
      const [studyMode, setStudyMode] = useState("browse");
      const [starredCards, setStarredCards] = useState(new Set());
      const [shuffled, setShuffled] = useState(false);
      const [cardOrder, setCardOrder] = useState([]);
      const [showPinyin, setShowPinyin] = useState(true);

      const cards = levels[selectedLevel];
      const displayCards = studyMode === "starred" 
        ? cards.filter((_, i) => starredCards.has(`${selectedLevel}-${i}`))
        : cards;
      
      const orderedCards = shuffled && cardOrder.length > 0 
        ? cardOrder.map(i => displayCards[i])
        : displayCards;
      
      const card = orderedCards[index] || displayCards[0];
      const cardKey = `${selectedLevel}-${cards.indexOf(card)}`;

      useEffect(() => {
        setIndex(0);
        setFlip(false);
        setShuffled(false);
        setCardOrder([]);
      }, [selectedLevel, studyMode]);

      const toggleStar = () => {
        const newStarred = new Set(starredCards);
        if (newStarred.has(cardKey)) {
          newStarred.delete(cardKey);
        } else {
          newStarred.add(cardKey);
        }
        setStarredCards(newStarred);
      };

      const shuffleCards = () => {
        const indices = Array.from({ length: displayCards.length }, (_, i) => i);
        for (let i = indices.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [indices[i], indices[j]] = [indices[j], indices[i]];
        }
        setCardOrder(indices);
        setShuffled(true);
        setIndex(0);
        setFlip(false);
      };

      const resetOrder = () => {
        setShuffled(false);
        setCardOrder([]);
        setIndex(0);
        setFlip(false);
      };

      const next = () => {
        setFlip(false);
        if (index < orderedCards.length - 1) setIndex(index + 1);
      };

      const back = () => {
        setFlip(false);
        if (index > 0) setIndex(index - 1);
      };

      const progress = orderedCards.length > 0 ? ((index + 1) / orderedCards.length) * 100 : 0;

      return (
        <div className="container">
          <div className="header">
            <h1 className="title">æ±‰è¯­ HSK</h1>
            <p className="subtitle">Chinese Flashcards</p>
          </div>

          <div className="controls">
            <div className="grid">
              <div>
                <label>Level</label>
                <select value={selectedLevel} onChange={(e) => setSelectedLevel(e.target.value)}>
                  <option value="HSK 1">HSK 1 (150 words)</option>
                  <option value="HSK 2">HSK 2 (150 words)</option>
                  <option value="HSK 3">HSK 3 (300 words)</option>
                </select>
              </div>
              <div>
                <label>Study Mode</label>
                <select value={studyMode} onChange={(e) => setStudyMode(e.target.value)}>
                  <option value="browse">Browse All</option>
                  <option value="starred">Starred Only ({starredCards.size})</option>
                </select>
              </div>
            </div>

            <div className="button-row">
              <button className="button" onClick={shuffled ? resetOrder : shuffleCards}>
                {shuffled ? "ğŸ”„ Reset" : "ğŸ”€ Shuffle"}
              </button>
              <button className="button" onClick={() => setShowPinyin(!showPinyin)}>
                {showPinyin ? "Hide" : "Show"} Pinyin
              </button>
            </div>
          </div>

          <div className="progress-container">
            <div className="progress-text">
              <span>Card {index + 1} of {orderedCards.length}</span>
              <span>{Math.round(progress)}%</span>
            </div>
            <div className="progress-bar">
              <div className="progress-fill" style={{ width: `${progress}%` }}></div>
            </div>
          </div>

          {orderedCards.length > 0 ? (
            <div className="card-container">
              <button
                onClick={toggleStar}
                className={`star-button ${starredCards.has(cardKey) ? 'starred' : 'unstarred'}`}
              >
                <StarIcon filled={starredCards.has(cardKey)} />
              </button>

              <div className="card-wrapper" onClick={() => setFlip(!flip)}>
                <div className={`card-inner ${flip ? 'flipped' : ''}`}>
                  <div className="card-face">
                    {showPinyin && <div className="pinyin">{card.pinyin}</div>}
                    {!showPinyin && <div className="hanzi-large">{card.hanzi}</div>}
                    <div className="flip-hint">Click to flip</div>
                  </div>

                  <div className="card-face card-back">
                    <div className="hanzi">{card.hanzi}</div>
                    <div className="hanzi-pinyin">{card.pinyin}</div>
                    <div className="english">{card.english}</div>
                  </div>
                </div>
              </div>
            </div>
          ) : (
            <div className="empty-state">
              <p>No cards in this selection. Star some cards to study them!</p>
            </div>
          )}

          {orderedCards.length > 0 && (
            <div className="nav-container">
              <button className="nav-button" onClick={back} disabled={index === 0}>
                Back
              </button>
              <div className="nav-counter">
                {index + 1} / {orderedCards.length}
              </div>
              <button className="nav-button" onClick={next} disabled={index === orderedCards.length - 1}>
                Next
              </button>
            </div>
          )}
        </div>
      );
    }

    ReactDOM.render(<App />, document.getElementById('root'));
  </script>
</body>
</html>